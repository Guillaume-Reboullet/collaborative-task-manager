generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  Admin
  Manager
  Member
}

model User {
  id       String   @id @default(uuid()) // Primary key as UUID
  name     String
  email    String   @unique
  password String
  role     Role     @default(Member) // Enum field with default value
  teams    Team[]   @relation("UserTeams") // Relation to Team members
  tasks    Task[]   @relation("TaskAssignee") // Relation to assigned tasks
  notifications Notification[] @relation("NotificationRecipient") // Notifications for the user
}

model Team {
  id      String  @id @default(uuid()) // Primary key as UUID
  name    String
  members User[]  @relation("UserTeams") // Relation to users
}

model Task {
  id          String @id @default(uuid()) // Primary key as UUID
  title       String
  description String
  priority    String
  deadline    DateTime
  assignee    User   @relation("TaskAssignee", fields: [assigneeId], references: [id]) // Relation to User
  assigneeId  String
}

model Notification {
  id         String @id @default(uuid()) // Primary key as UUID
  type       String
  message    String
  recipient  User   @relation("NotificationRecipient", fields: [recipientId], references: [id]) // Relation to User
  recipientId String
}